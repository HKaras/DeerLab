

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart tutorial &mdash; DeerLab</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/source/_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="/source/_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/table_util.css" type="text/css" />
  <link rel="stylesheet" href="_static/table_main.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v0.12.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginners_guide.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="uncertainty.html">Uncertainty</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="modelsref.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
</ul>
<p class="caption"><span class="caption-text">Others</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="funding.html">Funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DeerLab</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Quickstart tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart-tutorial">
<h1>Quickstart tutorial<a class="headerlink" href="#quickstart-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is intended as a overview of the fundamentals of DeerLab. If you are not familiar with DeerLab or
dipolar EPR spectroscopy data analysis, then the <a class="reference internal" href="beginners_guide.html#beginners-guide"><span class="std std-ref">Beginner’s Guide</span></a> might give you a better
insight on the basics for using DeerLab.</p>
<p>This tutorial will assume that DeerLab is already installed on your computer. DeerLab always needs to be imported prior
to calling any of its functions as well as any other packages</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">deerlab</span> <span class="k">as</span> <span class="nn">dl</span>              <span class="c1"># we always use &#39;dl&#39; as the local name for DeerLab</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                <span class="c1"># NumPy: vectors, matrices, linear algebra</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>   <span class="c1"># MatPlotLib: plotting</span>
</pre></div>
</div>
<div class="section" id="loading-experimental-data">
<h2>Loading experimental data<a class="headerlink" href="#loading-experimental-data" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="simulating-dipolar-signals">
<h2>Simulating dipolar signals<a class="headerlink" href="#simulating-dipolar-signals" title="Permalink to this headline">¶</a></h2>
<p>DeerLab is provides the tools for simulating dipolar signals originating from different experiments. Note that these simulations
are not based on spin dynamics simulations but rather on theoretical analytical treatments of such problems.</p>
<p>Simulations in DeerLab can be easily achieved via the Fredholm integral which for a general dipolar signal reads</p>
<div class="math">
<p><img src="_images/math/5b38ce8313e8be31f3e206c22b49e387ce6734c5.svg" alt="V(t) = \int K(t,r)P(r) \mathrm{d}r"/></p>
</div><p>which in matrix form reads</p>
<div class="math">
<p><img src="_images/math/7bc51004a61bfe8e222907548dd7b3e9e66d0400.svg" alt="\boldsymbol{V} = \boldsymbol{K}\boldsymbol{P}"/></p>
</div><div class="section" id="simulating-a-distance-distribution">
<h3>Simulating a distance distribution<a class="headerlink" href="#simulating-a-distance-distribution" title="Permalink to this headline">¶</a></h3>
<p>To simulate a dipolar signal you need first to define a distance distribution. This distribution can be the result of a fit, come
from molecular dynamics simulations, etc. or you can assume a certain shape for the distribution and use one of the parametric models
available in DeerLab. For example, to simulate a Gaussian distance distribution use the <code class="docutils literal notranslate"><span class="pre">dd_gauss</span></code> model function</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span>         <span class="c1"># distance range, in nm</span>
<span class="n">rmean</span> <span class="o">=</span> <span class="mf">3.5</span> <span class="c1"># nm</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c1"># nm</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="nf">dd_gauss</span><span class="p">(</span><span class="n">r</span><span class="p">,[</span><span class="n">rmean</span><span class="p">,</span> <span class="n">sigma</span><span class="p">])</span>  <span class="c1"># single-Gaussian distance distribution</span>
</pre></div>
</div>
</div>
<div class="section" id="simulating-a-dipolar-background">
<h3>Simulating a dipolar background<a class="headerlink" href="#simulating-a-dipolar-background" title="Permalink to this headline">¶</a></h3>
<p>Next, we calculate the background decay function due to a homogeneus 3D distribution of spins:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>             <span class="c1"># time axis, in microseconds</span>
<span class="n">conc</span> <span class="o">=</span> <span class="mi">100</span>                         <span class="c1"># spin concentration, in micromolar</span>
<span class="n">lam</span> <span class="o">=</span> <span class="mf">0.4</span>                          <span class="c1"># modulation depth</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="nf">bg_hom3d</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">conc</span><span class="p">,</span><span class="n">lam</span><span class="p">)</span>        <span class="c1"># homogeneous 3D background decay function</span>
</pre></div>
</div>
<p>Next, we combine the distance distribution and the background into a full 4-pulse DEER signal and add some noise:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">K</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="nf">dipolarkernel</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">lam</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>       <span class="c1"># DEER kernel</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">K</span><span class="nd">@P</span>                               <span class="c1"># DEER signal</span>
<span class="n">sig</span> <span class="o">=</span> <span class="mf">0.01</span>                            <span class="c1"># noise level</span>
<span class="n">Vexp</span> <span class="o">=</span> <span class="n">V</span> <span class="o">+</span> <span class="n">dl</span><span class="o">.</span><span class="nf">whitegaussnoise</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="n">sig</span><span class="p">)</span>  <span class="c1"># add noise</span>
</pre></div>
</div>
<p>We can look at the result:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">Vexp</span><span class="p">)</span>   <span class="c1"># plotting</span>
<span class="n">plt</span><span class="o">.</span><span class="nf">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Now that we have a noisy DEER trace, we fit itto it (in a single step) a model with a non-parametric distance distribution and a homogeneous 3D background.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="nf">fitsignal</span><span class="p">(</span><span class="n">Vexp</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="s1">&#39;P&#39;</span><span class="p">,</span><span class="n">dl</span><span class="o">.</span><span class="nf">bg_hom3d</span><span class="p">,</span><span class="n">dl</span><span class="o">.</span><span class="nf">ex_4pdeer</span><span class="p">)</span>  <span class="c1"># fitting</span>
</pre></div>
</div>
<p>Finally, we plot the results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plotting</span>
<span class="n">fit</span><span class="o">.</span><span class="nf">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019-2020, Luis Fábregas Ibáñez, Stefan Stoll, and others

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>